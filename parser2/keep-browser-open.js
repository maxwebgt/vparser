import puppeteer from 'puppeteer';

console.log('üîç –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ë—Ä–∞—É–∑–µ—Ä –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º\n');

const keepBrowserOpen = async () => {
  console.log('üåê –û—Ç–∫—Ä—ã–≤–∞–µ–º –±—Ä–∞—É–∑–µ—Ä (–ù–ï –ó–ê–ö–†–û–ï–¢–°–Ø –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò!)');
  
  const browser = await puppeteer.launch({ 
    headless: false,  // –†–ï–ê–õ–¨–ù–û–ï –û–ö–ù–û
    devtools: true,   // –° DevTools
    args: [
      '--start-maximized',
      '--no-first-run',
      '--no-default-browser-check',
      '--disable-infobars'
    ]
  });
  
  const page = await browser.newPage();
  
  console.log('\nüìã –ü–û–î–†–û–ë–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:');
  console.log('1. –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∏ –û–°–¢–ê–ù–ï–¢–°–Ø –û–¢–ö–†–´–¢–´–ú');
  console.log('2. –ü–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://www.vseinstrumenti.ru/');
  console.log('3. –ü–æ—Å–º–æ—Ç—Ä–∏ –≤ DevTools -> Network —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç');
  console.log('4. –ü—Ä–æ–≤–µ—Ä—å –µ—Å—Ç—å –ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã, –∫–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏');
  console.log('5. –ü–æ–ø—Ä–æ–±—É–π –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)');
  console.log('6. –°—Ä–∞–≤–Ω–∏ —Å –æ–±—ã—á–Ω—ã–º Chrome');
  console.log('7. –í–ê–ñ–ù–û: –ó–∞–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä –í–†–£–ß–ù–£–Æ –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—à—å');
  console.log('8. –ò–ª–∏ –Ω–∞–∂–º–∏ Ctrl+C –≤ —ç—Ç–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ\n');
  
  console.log('‚è∞ –ë—Ä–∞—É–∑–µ—Ä –≥–æ—Ç–æ–≤ –∫ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é! –ñ–¥—É —Ç–≤–æ–∏—Ö –∫–æ–º–∞–Ω–¥...');
  console.log('üí° –ë—Ä–∞—É–∑–µ—Ä –ù–ï –∑–∞–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - –∏—Å—Å–ª–µ–¥—É–π —Å–ø–æ–∫–æ–π–Ω–æ!\n');
  
  // –î–µ—Ä–∂–∏–º —Å–∫—Ä–∏–ø—Ç –∂–∏–≤—ã–º –¥–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  process.on('SIGINT', async () => {
    console.log('\nüî¥ –ü–æ–ª—É—á–µ–Ω —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –∑–∞–∫—Ä—ã–≤–∞—é –±—Ä–∞—É–∑–µ—Ä...');
    await browser.close();
    process.exit(0);
  });
  
  // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª - –±—Ä–∞—É–∑–µ—Ä –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è
  while (true) {
    await new Promise(resolve => setTimeout(resolve, 5000));
    console.log('‚è∞ –ë—Ä–∞—É–∑–µ—Ä –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç... (–Ω–∞–∂–º–∏ Ctrl+C –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)');
  }
};

await keepBrowserOpen(); 